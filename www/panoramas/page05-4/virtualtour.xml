<?xml version="1.0" encoding="UTF-8"?>
<!-- for xml compliance -->
<!-- Generated By Kolor Panotour 1.8.0 -->
<krpano version="1.0.8.14" logkey="false">
    <action name="mainloadpano">
		closepanoobjects();
		ifnot(stopSequence === undefined,interruptAnimation(););
		loadpano(%1,NULL,NULL,BLEND(1));
	</action>
    <plugin name="gyro" url="virtualtourdata/graphics/gyro.js" devices="ipad|iphone" keep="true" enabled="true"/>
    <!--************** KrPano plugins and datas ***************************************************-->
    <plugin name="data" keep="true"/>
    <!--************** Open the first pano ********************************************************-->
    <include url="virtualtour0.xml"/>
    <autorotate enabled="false"/>
    <!--************** Fonts **********************************************************************-->
    <textstyle name="DEFAULT" bold="false" font="Arial Narrow" fontsize="16" italic="false" textcolor="0xff000000"/>
    <!--************** Plugin map *****************************************************************-->
    <plugin name="map" url="virtualtourdata/map/map.png" keep="true" align="leftbottom" x="10" y="10" width="100" height="prop" handcursor="false" onloaded="hidemapspot();" onclick="openmap"/>
    <plugin keep="true" visible="false" name="mapspot0" onclick="mainloadpano(virtualtour0.xml);" url="virtualtourdata/graphics/spots/spot0.png" blingCounter="0" align="lefttop" edge="center" parent="map" x="58.7885%" y="50.4142%"/>
    <plugin name="mapradar" parent="map" edge="center" align="lefttop" keep="true" url="virtualtourdata/map/radar.swf" alturl="virtualtourdata/map/radar.js" visible="false" width="70" height="70" linecolor="0xffffff" linealpha="0.494118" linewidth="2" fillcolor="0xffffff" fillalpha="0.494118"/>
    <action name="showmapspot">
		set(  plugin[mapspot0].alpha  , 0);
		set(  plugin[mapspot0].visible, true);
		tween(plugin[mapspot0].alpha  , 1);
	</action>
    <action name="hidemapspot">
		set(plugin[mapspot0].visible,false);
	</action>
    <!-- close the map -->
    <action name="closemap">
		set(plugin[mapradar].visible,false);
		hidemapspot();
		set(plugin[map].onclick,openmap);
		tween(plugin[map].width,100);
	</action>
    <!-- open the map -->
    <action name="openmap">
		if(plugin[mapradar].shouldbevisible == true, set(plugin[mapradar].visible,true););
		set(plugin[map].onclick, closemap);
		set(plugin[map].height, prop);
		tween(plugin[map].width, 300, 0.5, easeoutquad, showmapspot(););
		set(plugin[map].align, leftbottom);
		set(plugin[map].x    , 10);
		set(plugin[map].y    , 10);
	</action>
    <!-- Убрать выделение всех точек карты, кроме тех, что переданы параметрами -->
    <!-- Убрать выделение всех точек карты, если параметр не задан -->
    <action name="unselectmapspotsbutpassed">
		set(plugin[mapradar].visible        , false);
		set(plugin[mapradar].shouldbevisible, false);
	</action>
    <!-- Выделить конкретную точку карты -->
    <action name="selectmapspot">
		unselectmapspotsbutpassed(%1);
		copy(plugin[mapradar].x              , plugin[%1].x);
		copy(plugin[mapradar].y              , plugin[%1].y);
		set( plugin[mapradar].heading        , %2          );
		set( plugin[mapradar].shouldbevisible, true        );
		if(plugin[map].onclick == closemap, set(plugin[mapradar].visible,true););
	</action>
    <!-- Raise sequence stopper and wait sequence time to break the delayed calls -->
    <action name="interruptAnimation">
		ifnot (stopSequence === undefined,
			set(stopSequence, true);
			wait(0);
		);
	</action>
</krpano>