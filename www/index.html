<!DOCTYPE html>
<html>
    <head>
        <title>Ярославль</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, width=device-width, height=device-height, target-densitydpi=device-dpi" />
<!--        -->
        <link rel="stylesheet/less" type="text/css" href="css/styles.less">
        <script type="text/javascript" src="js/less-1.3.1.min.js"></script>

<!--
        <link rel="stylesheet" type="text/css" href="css/styles.css">
-->
        <script type="text/javascript" src="js/cordova-2.2.0.js"></script>
        <script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>
        <script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=true"></script>
        <script type="text/javascript" src="js/infobox_packed.js"></script>
        <script type="text/javascript" src="js/map-manager.js"></script>
        
        <script type="text/javascript" src="js/menu-manager.js"></script>
        <script type="text/javascript" src="js/buttons-manager.js"></script>
        <script type="text/javascript" src="js/temples-manager.js"></script>
        <script type="text/javascript" src="js/content-loader.js"></script>
        
        <script type="text/javascript" src="js/iscroll.js"></script>
        <!--<script type="text/javascript" src="js/iscroll.min.js"></script>-->
        
        <!--<script type="text/javascript" src="js/jquery.mobile-1.2.0.min.js"></script>-->

		<script type="text/javascript" src="js/swfkrpano.js"></script>
		<script type="text/javascript" src="js/krpanoiphone.license.js"></script>
		<script type="text/javascript" src="js/krpanoiphone.js"></script>

		<script type="text/javascript" src="js/jquery.css3caching.js"></script>

		<script type="text/javascript">
            $(document).ready(function(e) {
				_Menu = $("#Menu");
				_Buttons = $("#Buttons");
				_Temples = $("#Temples");
				_PanoramaContent = $("#PanoramaContent");
				_Hint = $("#Hint");
				_MenuButton = $("#MenuButton");
				_Pages = $("#Pages");
				_PagesScroller = _Pages.children("#PagesScroller");
				
				_Page01 = _PagesScroller.children("#Page01");
                _Page02 = _PagesScroller.children("#Page02");
                _Page03 = _PagesScroller.children("#Page03");
                _Page04 = _PagesScroller.children("#Page04");
                _Page051 = _PagesScroller.children("#Page05-1");
                _Page052 = _PagesScroller.children("#Page05-2");
                _Page053 = _PagesScroller.children("#Page05-3");
                _Page054 = _PagesScroller.children("#Page05-4");
                _Page055 = _PagesScroller.children("#Page05-5");
                _Page056 = _PagesScroller.children("#Page05-6");
                _Page06 = _PagesScroller.children("#Page06");
                _Page07 = _PagesScroller.children("#Page07");
                _Page08 = _PagesScroller.children("#Page08");
                _Page09 = _PagesScroller.children("#Page09");
                _Page10 = _PagesScroller.children("#Page10");
                _Page11 = _PagesScroller.children("#Page11");
                _Page12 = _PagesScroller.children("#Page12");
                _Page13 = _PagesScroller.children("#Page13");

                Loader.getContent({target: _Menu});
                Loader.getContent({target: _Buttons});
				Loader.getContent({target: _Temples});
				Loader.getContent({target: _PanoramaContent});
				Loader.getContent({target: _Hint});
                
				var wrapperWidth = _Pages.width();
				wrapperHeight = _Pages.height();
				var pages = _PagesScroller.children();

				_PagesScroller.css("width", wrapperWidth * pages.length);
				pages.css("width", wrapperWidth).css("min-height", wrapperHeight);

				Loader.getContent({
					 target: pages.first()
					,loadNext: true});

				var currentPageIndex = -1;
				mainScroller = new iScroll(_Pages.get(0), {
					 snap: true
					,momentum: false
					,hThreshold: 200
					,hScroll: true
					,vScroll: false
					,hScrollbar: false
					,vScrollbar: false
					,lockDirection: true
					,onScrollMove: function(event) {
						_MenuButton.addClass("invisible");
						_Buttons.addClass("invisible");
					}
					,onTouchEnd: function() {
						if (currentPageIndex !== this.currPageX) {
							currentPageIndex = this.currPageX;
							var pages = $(this.wrapper).children().children();
							setTimeout(function () {
								Loader.getContent({
									 target: pages.eq(currentPageIndex)
									,loadNext: true});
							}, 300);
						}
					}
				});
				pageScroller = [];			
				panoramaViewer = null;
            });
        </script>
    </head>
    <body>
    	<div id="MenuButton" class="brown"><p>содержание</p></div>
        <div id="Menu" class="invisible" data-url="menu.html"></div>
        <div id="Buttons" data-url="buttons.html"></div>
        <div id="Temples" class="invisible" data-url="temples.html"></div>
        <div id="Pages">
        	<div id="PagesScroller">
                <div id="Page01" class="page" data-url="page01.html"></div>
                <div id="Page02" class="page" data-url="page02.html"></div>
                <div id="Page03" class="page" data-url="page03.html"></div>
                <div id="Page04" class="page" data-url="page04.html"></div>
                <div id="Page05-1" class="page" data-url="page05-1.html"></div>
                <div id="Page05-2" class="page" data-url="page05-2.html"></div>
                <div id="Page05-3" class="page" data-url="page05-3.html"></div>
                <div id="Page05-4" class="page" data-url="page05-4.html"></div>
                <div id="Page05-5" class="page" data-url="page05-5.html"></div>
                <div id="Page05-6" class="page" data-url="page05-6.html"></div>
                <div id="Page06" class="page" data-url="page06.html"></div>
                <div id="Page07" class="page" data-url="page07.html"></div>
                <div id="Page08" class="page" data-url="page08.html"></div>
                <div id="Page09" class="page" data-url="page09.html"></div>
                <div id="Page10" class="page" data-url="page10.html"></div>
                <div id="Page11" class="page" data-url="page11.html"></div>
                <div id="Page12" class="page" data-url="page12.html"></div>
                <div id="Page13" class="page" data-url="page13.html"></div>
            </div>
        </div>
        <div id="Hint" class="invisible" data-url="hint.html"></div>
        <div id="PanoramaContent" class="invisible" data-url="panorama.html"></div>
    </body>
</html>
